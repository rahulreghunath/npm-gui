<!DOCTYPE html>
<html>
<head>
  <title>NPM GUI</title>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="assets/css/photon.min.css">
</head>
<body>
<div class="window" id="app">
  <!-- Your app's content goes inside .window-content -->
  <div class="window-content">
    <div class="pane-group">
      <div class="pane pane-sm sidebar">
        <nav class="nav-group">
          <h5 class="nav-group-title">Favorites</h5>
          <span @click="openFile" class="nav-group-item">
                <span class="icon icon-folder"></span>
                Add Project
              </span>
          <span class="nav-group-item">
                <span class="icon icon-home"></span>
                connors
              </span>
          <span class="nav-group-item">
                <span class="icon icon-light-up"></span>
                Photon
              </span>
          <span class="nav-group-item">
                <span class="icon icon-download"></span>
                Downloads
              </span>
          <span class="nav-group-item">
                <span class="icon icon-window"></span>
                Applications
              </span>
          <span class="nav-group-item">
                <span class="icon icon-signal"></span>
                AirDrop
              </span>
          <span class="nav-group-item">
                <span class="icon icon-monitor"></span>
                Desktop
              </span>
        </nav>
      </div>

      <div class="pane">
        <table class="table-striped">
          <thead>
          <tr>
            <th>Name</th>
            <th>Location</th>
          </tr>
          </thead>
          <tbody>
          <tr v-for="project in projects">
            <td>{{project.name}}</td>
            <td>{{project.path}}</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
</body>
<script>
  const {dialog}=require('electron').remote;
  const path=require('path');
  const Vue=require('vue/dist/vue');
  new Vue({
    el:'#app',
    data:{
      projects:[],
    },
    methods:{
      openFile(){
        dialog.showOpenDialog({ properties: ['openFile'] }).then(({filePaths})=>{

          if(path.basename(filePaths[0])==='package.json'){
            let folders=path.dirname(filePaths[0]).split('/');
            this.projects.push({name:folders.slice(-1)[0],path:path.dirname(filePaths[0])});
          }
        })
      }
    }
  });
</script>
</html>
